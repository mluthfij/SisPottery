<div class="row row-cols-1 row-cols-md-3 g-4 mb-4">
    <% obj.order(id: :desc).each do |product| %>
        <div class="col">
            <div class="card h-100">
            <% if user_signed_in? %>
            <div class="position-absolute top-0 end-0 m-1">
                <%= render "products/upvote_link", product: product %>
            </div>
            <% else %>
                <%= link_to upvote_product_path(product), method: :patch, remote: true, data: { disable_with: "voting..." } do %>
                <div class="position-absolute top-0 end-0 m-1">
                    <h3>
                        <i class="bi bi-heart"></i>
                    </h3>
                </div>
                <% end %>
            <% end %>
                <%= link_to product_path(product) do %>
                    <% if product.images.attached? %>
                        <% product.images.each_with_index do |image, index| %>
                            <% if index == 0 %>
                                <%= image_tag(image, class:"card-img-top img-show") %>
                            <% end %>
                        <% end %>
                    <% else %>
                        <img src="https://lpm.ulm.ac.id/image/desain/empty.jpg" class="card-img-top img-show" alt="...">
                    <% end %>
                <% end %>

                <div class="card-body">
                    <h5 class="card-title"><%= link_to product.name, product, class:"text-decoration-none" %></h5>
                    <h6 class="card-subtitle mb-2 text-muted"><%= number_to_currency(product.price, unit: "Rp. ", separator: ",", delimiter: ".") %></h6>
                    <div class="text-end">
                        <h6 class="card-subtitle mb-2 text-muted">
                            <%= render "products/votes_score", product: product %>
                        </h6>
                    </div>
                </div>
            </div>
        </div>
    <% end %>
</div>


